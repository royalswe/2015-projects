/*
    checknet jQuery plugin by Tom Riley
    v1.6 Feb 2013
    http://tomriley.net
    http://3rdwavemedia.com
*/
(function(b){b.fn.checknet=function(a){function c(){window.checknet.windowIsActive=document.hidden||document.mozHidden||document.webkitHidden||document.msHidden?!1:!0}function d(a){window.checknet.windowIsActive&&b.ajax({url:a,cache:false,type:"HEAD"}).done(function(){window.checknet.conIsActive=!0}).fail(function(){window.checknet.conIsActive=!1}).always(function(){window.checknet.conIsActive?(b("#netWarn").length&&b("#netWarn").fadeOut("fast",function(){b(this).remove()}),b("#search-results").removeClass("disable-links"),b(".tempDisabled").removeAttr("disabled").removeClass("tempDisabled"),b("#local-cache").addClass("show-cache")):
(b("#netWarn").length || (b(".body-content").prepend('<p id="netWarn">' + window.checknet.config.warnMsg + "</p>"), b("#netWarn").fadeIn("fast")), b('button[type="submit"]').attr("disabled", "disabled").addClass("tempDisabled"), b('input[type="text"]').attr("disabled", "disabled").addClass("tempDisabled"), b('#search-results').addClass("disable-links"), b("#local-cache").removeClass("show-cache"))
}); setTimeout(function () { d(window.checknet.config.checkURL + "ping.html") }, window.checknet.config.checkInterval)
} a = a || {}; a.checkURL = a.checkURL || window.location.href; a.checkInterval = a.checkInterval || 5E3; a.warnMsg = a.msg || "No Internet connection detected, disabled features will be re-enabled when a connection is detected. ";
-1===a.checkURL.indexOf("http")&&(a.checkURL="http://"+a.checkURL);window.checknet={windowIsActive:!0,conIsActive:!0,config:a};"undefined"!==typeof document.hidden?document.addEventListener("visibilitychange",c):"undefined"!==typeof document.webkitHidden?document.addEventListener("webkitvisibilitychange",c):"undefined"!==typeof document.mozHidden?document.addEventListener("mozvisibilitychange",c):"undefined"!==typeof document.msHidden&&document.addEventListener("msvisibilitychange",c);d(window.checknet.config.checkURL)}})(jQuery);
// Show values from localstorage
if (typeof (Storage) !== "undefined" && localStorage.length > 0) {
    $('#local-cache').append("<h3>Previously visited pages are cached</h3>");
    for (var i = 0; i < localStorage.length; i++) {
        $('#local-cache').append("<li><a href='" + localStorage.getItem(localStorage.key(i)) + "'>" + localStorage.key(i) + "</a></li>");
    }
}
